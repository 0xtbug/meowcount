
<div
  class="w-full max-w-sm mx-auto bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl p-6 sm:p-8 animate-fade-in border border-white/20"
  x-data="{
    serverCount: {{ server_count }},
    username: '{{ user }}',
    loading: false,
    async refreshData() {
      this.loading = true;
      try {
        const response = await fetch('/api/refresh', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' }
        });
        if (response.ok) {
          const data = await response.json();
          this.serverCount = data.server_count;
          this.username = data.username;
        } else {
          window.location.href = '/';
        }
      } catch (error) {
        console.error('Refresh failed:', error);
      } finally {
        this.loading = false;
      }
    }
  }"
>
  <div class="flex flex-col items-center w-full space-y-4">
    {% include 'components/icon.html' %}

    <div class="text-center space-y-1">
      <h1 class="text-2xl sm:text-3xl font-bold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent">
        MeowCount
      </h1>
      <p class="text-gray-500 text-sm sm:text-base">Track your Discord server membership</p>
    </div>

    <div class="text-center">
      <div class="text-lg sm:text-xl font-semibold text-gray-800 mb-1" x-text="username"></div>
    </div>

    <div class="text-center space-y-2">
      <div class="text-sm sm:text-base text-gray-600 font-medium">Total Server Count</div>
      <div class="text-5xl sm:text-6xl font-bold text-[#4facfe] animate-pulse" x-text="serverCount"></div>
      <div class="text-gray-400 text-sm">
        You're a member of <span x-text="serverCount" class="font-medium text-gray-600"></span> Discord servers
      </div>
    </div>

    <div class="w-full pt-2">
      <button
        @click="refreshData()"
        :disabled="loading"
        :class="loading ? 'opacity-50 cursor-not-allowed' : 'hover:shadow-lg hover:scale-105'"
        class="w-full bg-gradient-to-r from-gray-50 to-white text-gray-700 font-medium py-3 px-6 rounded-xl border border-gray-200 transition-all duration-300 shadow-sm"
      >
        <span x-show="!loading" class="flex items-center justify-center space-x-2">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
          </svg>
          <span>Refresh</span>
        </span>
        <span x-show="loading" class="flex items-center justify-center space-x-2">
          <svg class="w-4 h-4 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
          </svg>
          <span>Refreshing...</span>
        </span>
      </button>
    </div>

    {% include 'components/footer.html' %}
  </div>
</div>
